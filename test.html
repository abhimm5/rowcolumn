<script type="text/javascript">

  let v = ['61.2%', '38.8%']
  let h = ['61.2vh', '38.8vh']
  let vtotal = v.length + 1
  let htotal = h.length + 1

  let priVal = 100
  const ratio = 1.618;
  const parent = 100;
  const lg = 61.2;
  const sm = 38.8;

  const vp = ["vw", "vh"];
  const directionKeywords = ["perpendicular", "parallel", "both", "none"];
  const units = ["vh", "%", "em"];
  const baseNums = [38.2, 61.8, 100, 1.618, 0];
  const functionOrder = ["left", "right", "direction", "rotation", "modify", "clear"];
  const gridKeywords = ['verGrids', 'horGrids']
  const perpendicular = 0;
  const parallel = 1;

  Number.prototype.splits = function (a, b, c) {
    if (!arguments) { return }
    [this.left, this.right, this.direction] = arguments;
    this.master = {}
    for (var i = 0; i < arguments.length; i++) {
      this.master[functionOrder[i]] = (!isNaN(arguments[i]) ? arguments[i] * 1 : arguments[i]);
    }
    return this
  }

  class layout {
    constructor(a) {
      this.primaryNumber = a;
      this.composition = new Array;
      this.axisContainer = new Object;
      this.current = new Object;
      this.axisContainer.xAxis = { left: a, right: a, direction: "perpendicular" };
      this.axisContainer.yAxis = { left: a, right: a, direction: "parallel" };
    }
    placing(direction,material){
      let obj = new Object;
      let redefine  = (arr, key, anyVal) => arr.find(o => Object.values(o).includes(anyVal))?.[key]
      obj.left = (material.left instanceof Object)? obj.left = undefined:obj.left = redefine(material.axis,'left',material.direction)
      obj.right = (material.right instanceof Object)? obj.right = undefined:obj.right = redefine(material.axis,'right',material.direction)
      obj.direction = material.direction
      this.composition.push(obj);
    }
    compose(object, gridValue, tracker) {
      let parentVal = object.valueOf(),axis;
      const { master, splits, isObject, ...spliced } = object;
      if(this.primaryNumber==parentVal){
        axis = this.axisContainer;
        let left,right;
        object.master.left = (Math.round(parentVal * object.master.left) / 100)
        object.master.right = (Math.round(parentVal * object.master.right) / 100)
        if(object.direction=="perpendicular"){
          axis.xAxis = object.master
        }
        if(object.direction=="parallel"){
          axis.yAxis = object.master
        }
        object.axis = Object.values(axis)
      } 
      else{
        axis = Object.assign({},object.axis);
        object.master.left = (Math.round(gridValue * object.master.left) / 100)
        object.master.right = (Math.round(gridValue * object.master.right) / 100)
        if(object.direction=="perpendicular"){
          axis[0] = object.master
        }
        if(object.direction=="parallel"){
          axis[1] = object.master
        }
        object.axis = Object.values(axis)
      }
      this.placing(object.direction,object)
      for(let key in spliced){        
        if(spliced[key] instanceof Object&& !Array.isArray(spliced[key])){
          spliced[key].axis = object.axis
          //console.log(object[key])
          let find = (direction,gridName) => {
            let value;
            if(direction == 'perpendicular'){
              gridName == 'left'?value = object.axis[0].left:value = object.axis[0].right
            }
            if(direction == 'parallel'){
              gridName == 'left'?value = object.axis[1].left:value = object.axis[1].right
            }
            return value
          }
          this.compose(spliced[key],find(object[key].direction,key))
        }
      }
      return this.composition
    }
  }

  var k = new layout(100)
  let composeObject = (100).splits(lg.splits(lg,sm,'perpendicular'), sm.splits(lg, sm.splits(lg,sm,'perpendicular'), "parallel"), "perpendicular")
  k.compose(composeObject)
  k.composition

  function tree(array) {
    let obj = array.shift();
    for (let [key, value] of Object.entries(obj)){
      if (value === undefined){
        obj[key] = tree(array);
      }
    }
    return obj;
  }

console.log(tree(k.composition));
console.log((100).splits(lg.splits(lg,sm,'perpendicular'), sm.splits(lg, sm.splits(lg,sm,'perpendicular'), "parallel"), "perpendicular"))

</script>