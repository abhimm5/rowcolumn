"use strict";var R=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var I=Object.prototype.hasOwnProperty;var O=(e,t)=>{for(var s in t)R(e,s,{get:t[s],enumerable:!0})},P=(e,t,s,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of C(t))!I.call(e,o)&&o!==s&&R(e,o,{get:()=>t[o],enumerable:!(a=k(t,o))||a.enumerable});return e};var _=e=>P(R({},"__esModule",{value:!0}),e);var W={};O(W,{Layout:()=>U});module.exports=_(W);var m=require("vue");function H(e){let t={t:0,r:0,b:0,l:0};return e.forEach(s=>{let a=s.match(/^([trbl])(\d+)$/);a&&(t[a[1]]+=parseInt(a[2],10))}),t}var E=class e{constructor(t,s="leaf",a=[]){this.size=t;this.type=s;this.children=a;this.isSkippedSelf=!1;this.offsetIndices=[];this.styles={};this.spreadData={t:0,r:0,b:0,l:0};this.childPropRules=[];this.childSpreadRules=[]}col(...t){return new e(this.size,"col",t)}row(...t){return new e(this.size,"row",t)}offset(t){return Array.isArray(t)?this.offsetIndices=t:this.isSkippedSelf=!0,this}props(t){return this.styles={...this.styles,...t},this}childProps(t,s){return this.childPropRules.push({data:t,indices:s||null}),this}spread(t,s){let a=H(t);return s?this.childSpreadRules.push({data:a,indices:s}):(this.spreadData.t+=a.t,this.spreadData.r+=a.r,this.spreadData.b+=a.b,this.spreadData.l+=a.l),this}},M=class{constructor(t,s,a,o,r,d,g,h={t:0,r:0,b:0,l:0}){this.x=t;this.y=s;this.w=a;this.h=o;this.styles=r;this.isSkipped=d;this.customSize=g;this.spreadData=h}},z=!1;function A(){if(z)return;z=!0;let e=s=>new E(s),t=(s,a=!1)=>{if(s.col)return;let o=r=>e(a?String(r):r);s.col=function(...r){return new E(a?String(this):this,"col",r)},s.row=function(...r){return new E(a?String(this):this,"row",r)},s.offset=function(r){return o(this).offset(r)},s.props=function(r){return o(this).props(r)},s.childProps=function(r,d){return o(this).childProps(r,d)},s.spread=function(r,d){return o(this).spread(r,d)}};t(Number.prototype,!1),t(String.prototype,!0)}var $={bps:{sm:576,md:768,lg:992,xl:1200,xxl:1400},_strMap:new Map,_strCounter:0,init(){A(),this.upd(),typeof window<"u"&&window.addEventListener("resize",()=>this.upd())},upd(){typeof document<"u"&&document.querySelectorAll("[layout]").forEach(e=>this.render(e))},evalLayout(e){if(e)try{return new Function("lg","sm","Grid","auto","return "+e)(61.8,38.2,100,"auto")}catch(t){console.error(`Layout Error: "${e}"`,t);return}},isNode(e){return e&&typeof e=="object"&&Array.isArray(e.children)&&(e.type==="col"||e.type==="row"||e.type==="leaf")},render(e,t){A();let s=t;if(!s){let i=window.innerWidth,n=["xxl","xl","lg","md","sm"],f=e.getAttribute("layout");for(let c of n)if(i>=this.bps[c]&&e.hasAttribute(`layout-${c}`)){f=e.getAttribute(`layout-${c}`);break}f&&(s=this.evalLayout(f))}if(!s)return;if(s.styles){let{className:i,class:n,...f}=s.styles;i&&e.classList.add(...i.split(" ")),n&&e.classList.add(...n.split(" ")),Object.assign(e.style,f)}let a=[];this.calc(s,0,0,100,100,a,!1,[],[],[],{val:0});let{cw:o,rh:r,xc:d,yc:g}=this.mesh(a);e.style.display="grid",e.style.gridTemplateColumns=o.join(" "),e.style.gridTemplateRows=r.join(" ");let h=Array.from(e.children);h.forEach((i,n)=>{i.style.gridColumn="",i.style.gridRow="",i.style.cssText=""});let u=0;a.forEach(i=>{if(i.isSkipped||!h[u])return;let n=h[u++],f=this.idx(d,i.x)+1,c=this.idx(d,i.x+i.w)+1,p=this.idx(g,i.y)+1,x=this.idx(g,i.y+i.h)+1;if(i.spreadData&&(f=Math.max(1,f-i.spreadData.l),p=Math.max(1,p-i.spreadData.t),c+=i.spreadData.r,x+=i.spreadData.b),n.style.gridColumn=`${f} / ${c}`,n.style.gridRow=`${p} / ${x}`,i.styles){let{className:w,class:S,...L}=i.styles;w&&n.classList.add(...w.split(" ")),S&&n.classList.add(...S.split(" ")),Object.assign(n.style,L)}})},calc(e,t,s,a,o,r,d,g,h,u,i){if(!e)return;(typeof e=="number"||e==="auto")&&(e=new E(e==="auto"?"auto":e,"leaf"));let n=this.isNode(e),f=d||n&&e.isSkippedSelf,c=[...g],p=[...h],x=[...u];n&&(e.offsetIndices?.length&&c.push({idx:e.offsetIndices,c:0}),e.childPropRules.length&&e.childPropRules.forEach(y=>p.push({rule:y,counter:{val:0}})),e.childSpreadRules.length&&e.childSpreadRules.forEach(y=>x.push({rule:y,counter:{val:0}})));let w;if(n&&typeof e.size=="string"&&(w=e.size),!n||!e.children.length){let y=f;for(let l=0;l<c.length;l++)c[l].c++,c[l].idx.includes(c[l].c)&&(y=!0);y||(i.val++,p.forEach(l=>l.counter.val++),x.forEach(l=>l.counter.val++));let b=n?{...e.spreadData}:{t:0,r:0,b:0,l:0},N=n?{...e.styles}:{};y||(x.forEach(l=>{(!l.rule.indices||l.rule.indices.includes(l.counter.val))&&(b.t+=l.rule.data.t,b.r+=l.rule.data.r,b.b+=l.rule.data.b,b.l+=l.rule.data.l)}),p.forEach(l=>{(!l.rule.indices||l.rule.indices.includes(l.counter.val))&&Object.assign(N,l.rule.data)})),r.push(new M(t,s,a,o,N,y,w,b));return}let S=0;e.children.forEach(y=>{let b=this.isNode(y)?y.size:y;typeof b=="string"?b=0:this.isNode(y)&&y.size===0&&(b=1),S+=Number(b)}),S===0&&(S=1);let L=e.type==="col"?t:s;e.children.forEach((y,b)=>{let N=this.isNode(y)?y.size:y,l=typeof N=="string",T=l?0:Number(N);this.isNode(y)&&y.size===0&&!l&&(T=1);let j=T/S,D=0;if(l&&(this._strCounter++,D=1e-6+this._strCounter*1e-7,this._strMap.set(D.toFixed(9),N)),e.type==="col"){let v=l?D:a*j;this.calc(y,L,s,v,o,r,f,c,p,x,i),L+=v}else{let v=l?D:o*j;this.calc(y,t,L,a,v,r,f,c,p,x,i),L+=v}})},mesh(e){this._strCounter=0;let t=[0],s=[0],a=0,o=0;e.forEach(u=>{t.push(u.x,u.x+u.w),s.push(u.y,u.y+u.h),u.x+u.w>a&&(a=u.x+u.w),u.y+u.h>o&&(o=u.y+u.h)}),a>1&&t.push(100),o>1&&s.push(100);let r=u=>[...new Set(u.sort((i,n)=>i-n))].filter((i,n,f)=>n===0||Math.abs(i-f[n-1])>1e-8),d=r(t),g=r(s),h=u=>{let i=[];for(let n=1;n<u.length;n++){let f=u[n]-u[n-1],c=null;for(let[p,x]of this._strMap){let w=Number(p);if(Math.abs(f-w)<1e-8){c=x;break}}i.push(c||f+"fr")}return i};return{xc:d,yc:g,cw:h(d),rh:h(g)}},idx(e,t){let s=-1,a=1/0;return e.forEach((o,r)=>{let d=Math.abs(o-t);d<a&&(a=d,s=r)}),s},compileCSS(e){let t=this.evalLayout(e);if(!t)return null;let s=[];this.calc(t,0,0,100,100,s,!1,[],[],[],{val:0});let{cw:a,rh:o,xc:r,yc:d}=this.mesh(s),g=`display: grid; grid-template-columns: ${a.join(" ")}; grid-template-rows: ${o.join(" ")};`,h="",u=1;for(let i of s){if(i.isSkipped)continue;let n=this.idx(r,i.x)+1,f=this.idx(r,i.x+i.w)+1,c=this.idx(d,i.y)+1,p=this.idx(d,i.y+i.h)+1;i.spreadData&&(n=Math.max(1,n-i.spreadData.l),c=Math.max(1,c-i.spreadData.t),f+=i.spreadData.r,p+=i.spreadData.b),h+=`
  & > :nth-child(${u++}) { grid-area: ${c} / ${n} / ${p} / ${f}; }`}return g+h}};var U=(0,m.defineComponent)({name:"Layout",props:{layout:{type:[String,Object],required:!0},"layout-sm":{type:[String,Object]},"layout-md":{type:[String,Object]},"layout-lg":{type:[String,Object]}},setup(e,{slots:t,attrs:s}){let a=(0,m.ref)(null),o=()=>{if(a.value){let r=window.innerWidth,d;r>=992&&typeof e["layout-lg"]=="object"?d=e["layout-lg"]:r>=768&&typeof e["layout-md"]=="object"?d=e["layout-md"]:r>=576&&typeof e["layout-sm"]=="object"?d=e["layout-sm"]:typeof e.layout=="object"&&(d=e.layout),$.render(a.value,d)}};return(0,m.onMounted)(()=>{o(),window.addEventListener("resize",o)}),(0,m.onUpdated)(()=>o()),(0,m.onUnmounted)(()=>window.removeEventListener("resize",o)),()=>{let r={...s};return typeof e.layout=="string"&&(r.layout=e.layout),typeof e["layout-sm"]=="string"&&(r["layout-sm"]=e["layout-sm"]),(0,m.h)("div",{ref:a,style:{display:"grid",width:"100%",height:"100%"},...r},t.default?t.default():[])}}});0&&(module.exports={Layout});
